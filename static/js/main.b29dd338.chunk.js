(this["webpackJsonpstrava-github-calendar"]=this["webpackJsonpstrava-github-calendar"]||[]).push([[0],{146:function(e,t,a){e.exports={welcomeMessage:"styles_welcomeMessage__1TKJu",sampleGraph:"styles_sampleGraph__2t_wQ",connectText:"styles_connectText__1YX2X"}},147:function(e,t,a){e.exports={legend:"styles_legend__17u3L",labelText:"styles_labelText__2u9Z9"}},213:function(e,t,a){e.exports={monthNode:"styles_monthNode__1qqTP",monthText:"styles_monthText__2UjKw"}},214:function(e,t,a){e.exports={day:"styles_day__2MEFe",dayText:"styles_dayText__3nYRt"}},324:function(e,t,a){e.exports=a.p+"static/media/logo.52946ee0.png"},332:function(e,t,a){e.exports={dataDigestion:"styles_dataDigestion__2SQFo"}},333:function(e,t,a){e.exports={node:"styles_node__1LXWE"}},343:function(e,t,a){e.exports=a(712)},348:function(e,t,a){},372:function(e,t){},406:function(e,t){},408:function(e,t){},41:function(e,t,a){e.exports={container:"styles_container__3B2i6",graphContainer:"styles_graphContainer__24ldH",graphSection:"styles_graphSection__1023A",graph:"styles_graph__RRI0v",dayRunner:"styles_dayRunner__24Is6",monthRunner:"styles_monthRunner__UAYNl",userInfoContainer:"styles_userInfoContainer__1hAKg",userAvatar:"styles_userAvatar__2Pi6L",userBasicInfo:"styles_userBasicInfo__1onZ9",userCity:"styles_userCity__LMxxX",activitiesSummaryContainer:"styles_activitiesSummaryContainer__1nINb"}},455:function(e,t){},457:function(e,t){},458:function(e,t){},463:function(e,t){},465:function(e,t){},485:function(e,t){},501:function(e,t){},504:function(e,t){},530:function(e,t){},712:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(12),r=a.n(l),s=(a(348),a(140)),o=a(26),i=a(117),m=a.n(i);let u=null,E=null,g=null;function d(){return u}async function f(e){console.log("code:",e);const{access_token:t,athlete:a}=await m.a.oauth.getToken(e);console.log("access_token, athlete",t,a),u=a,function(e){E=new m.a.client(e)}(t)}async function p(){const e=Math.floor((new Date).getTime()/1e3),t=function(e){const t=new Date(1e3*e);for(;0!==t.getDay();)t.setDate(t.getDate()-1);return t.getTime()/1e3}(e-31536e3);let a=1,n=[],c=[];do{n=await E.athlete.listActivities({before:e,after:t,page:a,per_page:50}),c=[...c,...n],a++}while(50===n.length);g=function(e,t,a){const n=function(e,t){const a=new Date(1e3*e);v(a);const n={},c=new Date(1e3*t);for(v(c);a.getTime()>=c.getTime();a.setDate(a.getDate()-1))n[a.toLocaleString("sv").split(" ")[0]]={};return n}(t,a);return e.forEach(e=>{let t=n[e.start_date_local.split("T")[0]];t||(t={},n[e.start_date_local.split("T")[0]]=t),t.activities||(t.activities=[],t.effortLevel=0),t.activities.push(e),t.effortLevel+=function(e){switch(e.type){case"Run":return h(e.distance,2e3,200);case"Ride":return h(e.distance,1500,200);case"Walk":return h(e.distance,800,200);default:return 1.5}}(e)}),n}(c,e,t)}function h(e,t,a){return 0===e?0:e<t-a?1:Math.floor((e+a)/t+1)}function v(e){e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0)}m.a.config({client_id:"33044",client_secret:"6983580288357d168b82ba26176b89055516ff81",redirect_uri:"https://manojvivek.github.io/strava-github-like-graph/auth-callback"});var _=a(18);function y(e){return c.a.createElement(_.a,{className:"theme-color align-center ".concat(e.className||""),type:"loading-3-quarters",spin:!0,style:{fontSize:"30px"}})}function w(e){const t=Object(o.f)();return Object(n.useEffect)(()=>{(async()=>{const e=new URLSearchParams(window.location.search);await f(e.get("code")),t.push("/strava-github-calendar")})()},[t]),c.a.createElement(y,null)}function x(){return Object(n.useEffect)(()=>{window.location=m.a.oauth.getRequestAccessURL({scope:"activity:read"})},[]),c.a.createElement(y,null)}var b=a(3),C=a.n(b),N=a(90),k=a.n(N),M=a(324),S=a.n(M),T=a(115);function D(){return c.a.createElement("div",{className:C()(k.a.header)},c.a.createElement("img",{src:S.a,className:C()(k.a.logoImage),alt:"Strava-Github-Like-Graph"}),c.a.createElement("div",{className:C()(k.a.aboutSection)},c.a.createElement(T.a,{title:"Lets improve it together! \ud83d\ude0e",className:C()(k.a.iconContainer)},c.a.createElement("a",{href:"https://github.com/manojVivek/strava-github-like-graph",target:"_blank",rel:"noopener noreferrer"},c.a.createElement(_.a,{type:"github",className:C()(k.a.icon)})))))}var L=a(216);const{Step:I}=L.a;function z(e){let{step:t}=e;return c.a.createElement(L.a,null,c.a.createElement(I,{status:t<2?"process":"finish",title:"Connect Strava",icon:c.a.createElement(_.a,{type:"user"})}),c.a.createElement(I,{status:2===t?"process":1===t?"wait":"finish",title:"Data Digestion",icon:c.a.createElement(_.a,{type:"experiment"})}),c.a.createElement(I,{status:3===t?"process":"wait",title:"Visualize",icon:c.a.createElement(_.a,{type:"crown"})}))}var j=a(44),R=a(339),A=a(146),O=a.n(A);const{Title:B,Text:H}=j.a;function F(){const e=Object(o.f)();return c.a.createElement("div",{className:C()(O.a.welcomeMessage)},c.a.createElement(B,{level:3,className:"theme-color text-center"},"Generate your Strava activities graph for last year:"),c.a.createElement("img",{alt:"Sample graph",className:C()(O.a.sampleGraph),src:"".concat("/strava-github-calendar","/sample-graph_maxfield.jpg")}),c.a.createElement(H,{strong:!0,className:C()("height-200",O.a.connectText)},"Connect your Strava account below to see yours"),c.a.createElement(R.a,{type:"primary",icon:"lock",className:"top-space-medium",onClick:()=>e.push("init-auth")},"Connect Strava to see yours!"))}var X=a(332),G=a.n(X);const{Title:W}=j.a;function q(e){let{done:t}=e;return Object(n.useEffect)(()=>{(async()=>{await p(),t()})()},[t]),c.a.createElement("div",{className:C()(G.a.dataDigestion)},c.a.createElement(W,{level:3,className:"theme-color"},"Negotiating your data with Strava.."),c.a.createElement(y,{className:"top-space-medium"}))}var J=a(333),K=a.n(J);const Q={5:"#E34402",4:"#E96935",3:"#EE8F67",2:"#F4B49A",1:"#F9DACC"};function U(e){let{activities:t,effortLevel:a,day:n,disableHoverInfo:l,setSelectedDay:r}=e;return c.a.createElement(T.a,{mouseLeaveDelay:0,mouseEnterDelay:.05,title:l?null:"".concat(t?"".concat(t.length," activit").concat(1===t.length?"y":"ies"," of ").concat(Math.round(t.reduce((e,t)=>e+t.distance,0)/1e3),"kms"):"No activities"," on ").concat(n)},c.a.createElement("div",{className:C()(K.a.node),style:{backgroundColor:Q[a>5?5:a]||"#efefef"},onClick:r&&(()=>r(n))}))}var V=a(336),Y=a(213),P=a.n(Y);const{Text:Z}=j.a;function $(e){let{month:t}=e;return c.a.createElement("div",{className:C()(P.a.monthNode)},c.a.createElement(Z,{className:C()(P.a.monthText)},t))}var ee=a(41),te=a.n(ee),ae=a(214),ne=a.n(ae);const{Text:ce}=j.a;function le(e){let{day:t}=e;return c.a.createElement("div",{className:C()(ne.a.day)},c.a.createElement(ce,{className:C()(ne.a.dayText)},t))}var re=a(147),se=a.n(re);const{Text:oe}=j.a;function ie(){return c.a.createElement("div",{className:C()(se.a.legend)},c.a.createElement(oe,{className:C()(se.a.labelText)},"Less"),c.a.createElement(U,{effortLevel:0,disableHoverInfo:!0}),c.a.createElement(U,{effortLevel:1,disableHoverInfo:!0}),c.a.createElement(U,{effortLevel:2,disableHoverInfo:!0}),c.a.createElement(U,{effortLevel:3,disableHoverInfo:!0}),c.a.createElement(U,{effortLevel:4,disableHoverInfo:!0}),c.a.createElement(U,{effortLevel:5,disableHoverInfo:!0}),c.a.createElement(oe,{className:C()(se.a.labelText)},"More"))}var me=a(91),ue=a(717),Ee=a(47),ge=a(718);const de=()=>c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",height:24,viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve"},c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M426.667,0c-47.052,0-85.333,38.281-85.333,85.333c0,40.814,60.469,123.419,74.637,142.22     c-0.004,6.073,0,12.036-0.147,17.509c-0.156,5.885,4.49,10.792,10.385,10.948c0.094,0,0.188,0,0.292,0     c5.75,0,10.5-4.594,10.656-10.385c0.147-5.616,0.143-11.746,0.147-17.992C451.378,208.961,512,126.195,512,85.333     C512,38.281,473.719,0,426.667,0z M426.667,206.146c-23.448-32.26-64-93.656-64-120.813c0-35.292,28.708-64,64-64     s64,28.708,64,64C490.667,112.49,450.115,173.885,426.667,206.146z"}),c.a.createElement("path",{d:"M426.667,64c-11.76,0-21.333,9.573-21.333,21.333c0,11.76,9.573,21.333,21.333,21.333S448,97.094,448,85.333     C448,73.573,438.427,64,426.667,64z"}),c.a.createElement("path",{d:"M128,234.667c-35.292,0-64,28.708-64,64c0,35.292,28.708,64,64,64s64-28.708,64-64     C192,263.375,163.292,234.667,128,234.667z M128,341.333c-23.531,0-42.667-19.135-42.667-42.667S104.469,256,128,256     s42.667,19.135,42.667,42.667S151.531,341.333,128,341.333z"}),c.a.createElement("path",{d:"M289.573,384.438c-5.521-2.146-11.667,0.594-13.802,6.094c-4.781,12.354-10.76,26.76-18.823,39.958     c-3.073,5.031-1.479,11.594,3.542,14.667c1.74,1.063,3.656,1.563,5.552,1.563c3.594,0,7.104-1.813,9.115-5.104     c8.938-14.646,15.385-30.146,20.51-43.375C297.792,392.75,295.063,386.573,289.573,384.438z"}),c.a.createElement("path",{d:"M229.427,462.281c-10.688,8.469-22.833,14.844-37.146,19.5c-5.604,1.823-8.667,7.844-6.844,13.448     c1.469,4.5,5.646,7.365,10.146,7.365c1.094,0,2.208-0.167,3.302-0.521c16.531-5.375,31.26-13.135,43.792-23.063     c4.615-3.667,5.396-10.375,1.74-14.99C240.729,459.417,234.031,458.594,229.427,462.281z"}),c.a.createElement("path",{d:"M326.5,307.427c-17.604,9.99-27.385,27.333-33.219,39.5c-2.552,5.313-0.313,11.688,5,14.229     c1.49,0.719,3.063,1.052,4.604,1.052c3.979,0,7.792-2.229,9.625-6.052c7.406-15.448,14.969-24.75,24.531-30.188     c5.115-2.906,6.917-9.417,4-14.542C338.146,306.302,331.656,304.5,326.5,307.427z"}),c.a.createElement("path",{d:"M422.708,281.021c-4.844-3.281-11.5-2.021-14.813,2.854c-3.51,5.188-10.698,12.323-32.438,14.271     c-5.865,0.531-10.198,5.708-9.667,11.583c0.5,5.542,5.156,9.708,10.615,9.708c0.323,0,0.646-0.01,0.969-0.042     c23.094-2.073,38.854-9.781,48.188-23.563C428.865,290.958,427.583,284.323,422.708,281.021z"}),c.a.createElement("path",{d:"M153.275,490.805C186.932,454.913,256,372.341,256,298.667c0-71.771-56.229-128-128-128s-128,56.229-128,128     c0,95.26,115.75,205.76,120.677,210.417c2.052,1.948,4.688,2.917,7.323,2.917c7.771,0,15.156-0.271,22.156-0.802     c5.875-0.448,10.281-5.563,9.833-11.438C159.669,495.556,156.948,492.277,153.275,490.805z M128,486.292     c-25.198-25.708-106.667-114.5-106.667-187.625C21.333,238.854,68.188,192,128,192s106.667,46.854,106.667,106.667     C234.667,371.792,153.198,460.583,128,486.292z"})))),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null)),fe=()=>c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",height:24,x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve"},c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M435.143,129.356c-6.796-6.795-17.463-7.797-25.407-2.384c-29.926,20.398-180.03,122.969-196.162,139.1     c-23.394,23.395-23.394,61.459,0,84.854c11.697,11.696,27.063,17.545,42.427,17.545c15.364,0,30.729-5.849,42.427-17.545     c16.131-16.132,118.701-166.236,139.1-196.162C442.939,146.821,441.938,136.153,435.143,129.356z M270.142,322.641     c-7.797,7.799-20.486,7.799-28.283,0c-7.798-7.797-7.799-20.482-0.004-28.28c6.268-6.194,48.885-36.588,101.319-73.035     C306.728,273.76,276.334,316.375,270.142,322.641z"}),c.a.createElement("path",{d:"M92.231,401.523l-24.69,12.044C49.475,381.325,40,345.338,40,308.499c0-26.991,4.977-52.842,14.06-76.683l28.291,13.57     c2.79,1.338,5.735,1.972,8.636,1.972c7.453,0,14.608-4.185,18.047-11.355c4.776-9.959,0.576-21.906-9.384-26.683l-27.932-13.398     c34.717-56.62,94.784-96.095,164.283-102.505v30.081c0,11.046,8.954,20,20,20c11.046,0,20-8.954,20-20V93.402     c23.828,2.169,46.884,8.237,68.771,18.117c10.065,4.545,21.912,0.066,26.457-9.999c4.545-10.068,0.068-21.913-10-26.458     C328.063,60.091,292.659,52.499,256,52.499c-68.38,0-132.667,26.628-181.02,74.98C26.629,175.832,0,240.119,0,308.499     c0,50.53,14.998,99.674,43.373,142.115c3.822,5.715,10.141,8.886,16.639,8.886c2.954,0,5.946-0.655,8.757-2.026l41-20     c9.928-4.843,14.05-16.816,9.207-26.744C114.133,400.803,102.159,396.682,92.231,401.523z"}),c.a.createElement("path",{d:"M489.436,203.271c-4.544-10.067-16.387-14.547-26.458-10c-10.067,4.545-14.544,16.39-9.999,26.457     C465.601,247.686,472,277.553,472,308.499c0,36.894-9.506,72.939-27.625,105.218l-25.777-12.275     c-9.971-4.748-21.906-0.515-26.656,9.459c-4.749,9.972-0.514,21.907,9.459,26.656l42,20c2.763,1.315,5.692,1.944,8.588,1.944     c6.5,0,12.82-3.175,16.637-8.886C497.002,408.173,512,359.029,512,308.499C512,271.84,504.408,236.436,489.436,203.271z"})))),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null)),{Text:pe}=j.a;function he(e,t){const a=e/60/(t/1e3),n=Math.round(60*(a-Math.floor(a)));return"".concat(Math.floor(a),":").concat(n)}function ve(e){let{name:t,distance:a,elapsed_time:n,location_city:l,location_country:r}=e;return c.a.createElement(me.a,{className:"bottom-space-small"},c.a.createElement(ue.a,{title:t,style:{width:600},extra:c.a.createElement(pe,null,l?"".concat(l,", "):null,r)},c.a.createElement(Ee.a,{span:8},c.a.createElement(ge.a,{title:"",value:a/1e3,precision:2,prefix:c.a.createElement(_.a,{component:de}),suffix:"Km"})),c.a.createElement(Ee.a,{span:8},c.a.createElement(ge.a,{title:"",value:n/60,precision:0,prefix:c.a.createElement(_.a,{type:"clock-circle"}),suffix:"mins"})),c.a.createElement(Ee.a,{span:8},c.a.createElement(ge.a,{title:"",value:he(n,a),precision:2,prefix:c.a.createElement(_.a,{component:fe}),suffix:"/km"}))))}const{Text:_e,Title:ye}=j.a;function we(e){let{data:t}=e;const a=d(),l=Object.keys(t).reverse(),[r,s]=Object(n.useState)(Object.keys(t).find(e=>t[e].effortLevel));console.log("selectedDay",r);const o=new Date(l[0]),i=new Date,m=Array.from(Array(12)).map(()=>{const e=o.toLocaleString("default",{month:"short"});return o.setMonth(o.getMonth()+1),e});i.getDate()>14&&m.push(m[0]),i.getDate()>21&&m.shift();const u=c.a.useMemo(()=>Object.keys(t).reduce((e,a)=>e+(t[a].activities||[]).length,0),[t]);return c.a.createElement("div",{className:C()(te.a.container,"top-space-medium")},c.a.createElement("div",{className:C()(te.a.userInfoContainer)},c.a.createElement(V.a,{src:a.profile,className:C()(te.a.userAvatar)}),c.a.createElement("div",{className:C()(te.a.userBasicInfo)},c.a.createElement(_e,{strong:!0},"".concat(a.firstname," ").concat(a.lastname)),c.a.createElement(_e,{className:C()(te.a.userCity)},"".concat(a.city,", ").concat(a.country)))),c.a.createElement("div",null,c.a.createElement(_e,null,u," activities in the last year")),c.a.createElement("div",{className:C()(te.a.graphContainer)},c.a.createElement("div",{className:C()(te.a.graphSection)},c.a.createElement("div",{className:C()(te.a.dayRunner)},["Mon","Wed","Fri"].map(e=>c.a.createElement(le,{day:e,key:e}))),c.a.createElement("div",null,c.a.createElement("div",{className:C()(te.a.monthRunner),style:{padding:m.length>12?0:"0 16px"}},m.map((e,t)=>c.a.createElement($,{month:e,key:e+t}))),c.a.createElement("div",{className:C()(te.a.graph)},l.map(e=>c.a.createElement(U,Object.assign({},t[e],{key:e,day:e,setSelectedDay:s})))))),c.a.createElement("div",{className:C()(te.a.row)},c.a.createElement(ie,null))),c.a.createElement("div",{className:C()(te.a.activitiesSummaryContainer)},c.a.createElement(ye,{level:3},"Activities on ",r),(t[r].activities||[]).map(e=>c.a.createElement(ve,e))),c.a.createElement("div",null,c.a.createElement("pre",null,JSON.stringify(t[r],null,2))))}function xe(e){const t=d(),[a,l]=Object(n.useState)(null==t?1:2);return c.a.createElement(c.a.Fragment,null,c.a.createElement(z,{step:a}),1===a&&c.a.createElement(F,null),2===a&&c.a.createElement(q,{done:()=>l(3)}),3===a&&c.a.createElement(we,{data:g}))}var be=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(D,null),c.a.createElement(s.a,null,c.a.createElement(o.c,null,c.a.createElement(o.a,{path:"".concat("/strava-github-calendar","/auth-callback")},c.a.createElement(w,null)),c.a.createElement(o.a,{path:"".concat("/strava-github-calendar","/init-auth")},c.a.createElement(x,null)),c.a.createElement(o.a,{path:"".concat("/strava-github-calendar","/")},c.a.createElement(xe,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(716).a({dsn:"https://7ef33f9edba24b8aad31ad5801157c48@sentry.io/2201384"}),r.a.render(c.a.createElement(be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},90:function(e,t,a){e.exports={header:"style_header__MlSQ_",logoImage:"style_logoImage__1Hwfc",aboutSection:"style_aboutSection__YQNF5",iconContainer:"style_iconContainer__uR_VW",icon:"style_icon__1XDv0"}}},[[343,1,2]]]);
//# sourceMappingURL=main.b29dd338.chunk.js.map
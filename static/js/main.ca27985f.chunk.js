(this["webpackJsonpstrava-github-calendar"]=this["webpackJsonpstrava-github-calendar"]||[]).push([[0],{143:function(e,t,a){e.exports={welcomeMessage:"styles_welcomeMessage__1TKJu",sampleGraph:"styles_sampleGraph__2t_wQ",connectText:"styles_connectText__1YX2X"}},144:function(e,t,a){e.exports={legend:"styles_legend__17u3L",labelText:"styles_labelText__2u9Z9"}},204:function(e,t,a){e.exports={monthNode:"styles_monthNode__1qqTP",monthText:"styles_monthText__2UjKw"}},205:function(e,t,a){e.exports={day:"styles_day__2MEFe",dayText:"styles_dayText__3nYRt"}},313:function(e,t,a){e.exports=a.p+"static/media/logo.52946ee0.png"},321:function(e,t,a){e.exports={dataDigestion:"styles_dataDigestion__2SQFo"}},322:function(e,t,a){e.exports={node:"styles_node__1LXWE"}},331:function(e,t,a){e.exports=a(651)},336:function(e,t,a){},367:function(e,t){},369:function(e,t){},398:function(e,t){},399:function(e,t){},40:function(e,t,a){e.exports={container:"styles_container__3B2i6",graphContainer:"styles_graphContainer__24ldH",graphSection:"styles_graphSection__1023A",graph:"styles_graph__RRI0v",dayRunner:"styles_dayRunner__24Is6",monthRunner:"styles_monthRunner__UAYNl",userInfoContainer:"styles_userInfoContainer__1hAKg",userAvatar:"styles_userAvatar__2Pi6L",userBasicInfo:"styles_userBasicInfo__1onZ9",userCity:"styles_userCity__LMxxX",activitiesSummaryContainer:"styles_activitiesSummaryContainer__1nINb"}},444:function(e,t){},446:function(e,t){},469:function(e,t){},651:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(11),l=a.n(r),s=(a(336),a(137)),o=a(68),i=a(45),u=a.n(i),m=a(75),f=a(207),E=a(116),p=a.n(E),g=null,v=null,d=null;function h(e){v=new p.a.client(e)}function _(){return g}function y(e){return x.apply(this,arguments)}function x(){return(x=Object(m.a)(u.a.mark((function e(t){var a,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("code:",t),e.next=3,p.a.oauth.getToken(t);case 3:a=e.sent,n=a.access_token,c=a.athlete,console.log("access_token, athlete",n,c),g=c,h(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return w.apply(this,arguments)}function w(){return(w=Object(m.a)(u.a.mark((function e(){var t,a,n,c,r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=50,a=Math.floor((new Date).getTime()/1e3),n=C(a-31536e3),c=1,r=[],l=[];case 7:return e.next=9,v.athlete.listActivities({before:a,after:n,page:c,per_page:t});case 9:r=e.sent,l=[].concat(Object(f.a)(l),Object(f.a)(r)),c++;case 12:if(r.length===t){e.next=7;break}case 13:d=N(l,a,n);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){for(var t=new Date(1e3*e);0!==t.getDay();)t.setDate(t.getDate()-1);return t.getTime()/1e3}function N(e,t,a){var n=function(e,t){var a=new Date(1e3*e);M(a);var n={},c=new Date(1e3*t);for(M(c);a.getTime()>=c.getTime();a.setDate(a.getDate()-1))n[a.toLocaleString("sv").split(" ")[0]]={};return n}(t,a);return e.forEach((function(e){var t=n[e.start_date_local.split("T")[0]];t||(t={},n[e.start_date_local.split("T")[0]]=t),t.activities||(t.activities=[],t.effortLevel=0),t.activities.push(e),t.effortLevel+=function(e){switch(e.type){case"Run":return k(e.distance,2e3,200);case"Ride":return k(e.distance,1500,200);case"Walk":return k(e.distance,800,200);default:return 1.5}}(e)})),n}function k(e,t,a){return 0===e?0:e<t-a?1:Math.floor((e+a)/t+1)}function M(e){e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0)}p.a.config({client_id:"133803",client_secret:"91ff7b9396ccc12d9cc454afbcf40ab2c3c448ed",redirect_uri:"https://manojvivek.github.io/strava-github-like-graph/auth-callback"});var S=a(17);function T(e){return c.a.createElement(S.a,{className:"theme-color align-center ".concat(e.className||""),type:"loading-3-quarters",spin:!0,style:{fontSize:"30px"}})}function D(e){var t=Object(o.f)();return Object(n.useEffect)((function(){Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URLSearchParams(window.location.search),e.next=3,y(a.get("code"));case 3:t.push("/strava-github-calendar");case 4:case"end":return e.stop()}}),e)})))()}),[t]),c.a.createElement(T,null)}function j(){return Object(n.useEffect)((function(){window.location=p.a.oauth.getRequestAccessURL({scope:"activity:read"})}),[]),c.a.createElement(T,null)}var L=a(2),I=a.n(L),O=a(92),z=a.n(O),R=a(313),A=a.n(R),B=a(114);function H(){return c.a.createElement("div",{className:I()(z.a.header)},c.a.createElement("img",{src:A.a,className:I()(z.a.logoImage),alt:"Strava-Github-Like-Graph"}),c.a.createElement("div",{className:I()(z.a.aboutSection)},c.a.createElement(B.a,{title:"Lets improve it together! \ud83d\ude0e",className:I()(z.a.iconContainer)},c.a.createElement("a",{href:"https://github.com/manojVivek/strava-github-like-graph",target:"_blank",rel:"noopener noreferrer"},c.a.createElement(S.a,{type:"github",className:I()(z.a.icon)})))))}var F=a(142),X=a(206),G=X.a.Step;function W(e){var t=e.step;return c.a.createElement(X.a,null,c.a.createElement(G,{status:t<2?"process":"finish",title:"Connect Strava",icon:c.a.createElement(S.a,{type:"user"})}),c.a.createElement(G,{status:2===t?"process":1===t?"wait":"finish",title:"Data Digestion",icon:c.a.createElement(S.a,{type:"experiment"})}),c.a.createElement(G,{status:3===t?"process":"wait",title:"Visualize",icon:c.a.createElement(S.a,{type:"crown"})}))}var q=a(35),J=a(328),K=a(143),Q=a.n(K),U=q.a.Title,V=q.a.Text;function Y(){var e=Object(o.f)();return c.a.createElement("div",{className:I()(Q.a.welcomeMessage)},c.a.createElement(U,{level:3,className:"theme-color text-center"},"Generate your Strava activities graph for last year:"),c.a.createElement("img",{alt:"Sample graph",className:I()(Q.a.sampleGraph),src:"".concat("/strava-github-calendar","/sample-graph_maxfield.jpg")}),c.a.createElement(V,{strong:!0,className:I()("height-200",Q.a.connectText)},"Connect your Strava account below to see yours"),c.a.createElement(J.a,{type:"primary",icon:"lock",className:"top-space-medium",onClick:function(){return e.push("init-auth")}},"Connect Strava to see yours!"))}var P=a(321),Z=a.n(P),$=q.a.Title;function ee(e){var t=e.done;return Object(n.useEffect)((function(){Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:t();case 3:case"end":return e.stop()}}),e)})))()}),[t]),c.a.createElement("div",{className:I()(Z.a.dataDigestion)},c.a.createElement($,{level:3,className:"theme-color"},"Negotiating your data with Strava.."),c.a.createElement(T,{className:"top-space-medium"}))}var te=a(322),ae=a.n(te),ne={5:"#E34402",4:"#E96935",3:"#EE8F67",2:"#F4B49A",1:"#F9DACC"};function ce(e){var t=e.activities,a=e.effortLevel,n=e.day,r=e.disableHoverInfo,l=e.setSelectedDay;return c.a.createElement(B.a,{mouseLeaveDelay:0,mouseEnterDelay:.05,title:r?null:"".concat(t?"".concat(t.length," activit").concat(1===t.length?"y":"ies"," of ").concat(Math.round(t.reduce((function(e,t){return e+t.distance}),0)/1e3),"kms"):"No activities"," on ").concat(n)},c.a.createElement("div",{className:I()(ae.a.node),style:{backgroundColor:ne[a>5?5:a]||"#efefef"},onClick:l&&function(){return l(n)}}))}var re=a(325),le=a(204),se=a.n(le),oe=q.a.Text;function ie(e){var t=e.month;return c.a.createElement("div",{className:I()(se.a.monthNode)},c.a.createElement(oe,{className:I()(se.a.monthText)},t))}var ue=a(40),me=a.n(ue),fe=a(205),Ee=a.n(fe),pe=q.a.Text;function ge(e){var t=e.day;return c.a.createElement("div",{className:I()(Ee.a.day)},c.a.createElement(pe,{className:I()(Ee.a.dayText)},t))}var ve=a(144),de=a.n(ve),he=q.a.Text;function _e(){return c.a.createElement("div",{className:I()(de.a.legend)},c.a.createElement(he,{className:I()(de.a.labelText)},"Less"),c.a.createElement(ce,{effortLevel:0,disableHoverInfo:!0}),c.a.createElement(ce,{effortLevel:1,disableHoverInfo:!0}),c.a.createElement(ce,{effortLevel:2,disableHoverInfo:!0}),c.a.createElement(ce,{effortLevel:3,disableHoverInfo:!0}),c.a.createElement(ce,{effortLevel:4,disableHoverInfo:!0}),c.a.createElement(ce,{effortLevel:5,disableHoverInfo:!0}),c.a.createElement(he,{className:I()(de.a.labelText)},"More"))}var ye=a(93),xe=a(657),be=a(47),we=a(658),Ce=function(){return c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",height:24,viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve"},c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M426.667,0c-47.052,0-85.333,38.281-85.333,85.333c0,40.814,60.469,123.419,74.637,142.22     c-0.004,6.073,0,12.036-0.147,17.509c-0.156,5.885,4.49,10.792,10.385,10.948c0.094,0,0.188,0,0.292,0     c5.75,0,10.5-4.594,10.656-10.385c0.147-5.616,0.143-11.746,0.147-17.992C451.378,208.961,512,126.195,512,85.333     C512,38.281,473.719,0,426.667,0z M426.667,206.146c-23.448-32.26-64-93.656-64-120.813c0-35.292,28.708-64,64-64     s64,28.708,64,64C490.667,112.49,450.115,173.885,426.667,206.146z"}),c.a.createElement("path",{d:"M426.667,64c-11.76,0-21.333,9.573-21.333,21.333c0,11.76,9.573,21.333,21.333,21.333S448,97.094,448,85.333     C448,73.573,438.427,64,426.667,64z"}),c.a.createElement("path",{d:"M128,234.667c-35.292,0-64,28.708-64,64c0,35.292,28.708,64,64,64s64-28.708,64-64     C192,263.375,163.292,234.667,128,234.667z M128,341.333c-23.531,0-42.667-19.135-42.667-42.667S104.469,256,128,256     s42.667,19.135,42.667,42.667S151.531,341.333,128,341.333z"}),c.a.createElement("path",{d:"M289.573,384.438c-5.521-2.146-11.667,0.594-13.802,6.094c-4.781,12.354-10.76,26.76-18.823,39.958     c-3.073,5.031-1.479,11.594,3.542,14.667c1.74,1.063,3.656,1.563,5.552,1.563c3.594,0,7.104-1.813,9.115-5.104     c8.938-14.646,15.385-30.146,20.51-43.375C297.792,392.75,295.063,386.573,289.573,384.438z"}),c.a.createElement("path",{d:"M229.427,462.281c-10.688,8.469-22.833,14.844-37.146,19.5c-5.604,1.823-8.667,7.844-6.844,13.448     c1.469,4.5,5.646,7.365,10.146,7.365c1.094,0,2.208-0.167,3.302-0.521c16.531-5.375,31.26-13.135,43.792-23.063     c4.615-3.667,5.396-10.375,1.74-14.99C240.729,459.417,234.031,458.594,229.427,462.281z"}),c.a.createElement("path",{d:"M326.5,307.427c-17.604,9.99-27.385,27.333-33.219,39.5c-2.552,5.313-0.313,11.688,5,14.229     c1.49,0.719,3.063,1.052,4.604,1.052c3.979,0,7.792-2.229,9.625-6.052c7.406-15.448,14.969-24.75,24.531-30.188     c5.115-2.906,6.917-9.417,4-14.542C338.146,306.302,331.656,304.5,326.5,307.427z"}),c.a.createElement("path",{d:"M422.708,281.021c-4.844-3.281-11.5-2.021-14.813,2.854c-3.51,5.188-10.698,12.323-32.438,14.271     c-5.865,0.531-10.198,5.708-9.667,11.583c0.5,5.542,5.156,9.708,10.615,9.708c0.323,0,0.646-0.01,0.969-0.042     c23.094-2.073,38.854-9.781,48.188-23.563C428.865,290.958,427.583,284.323,422.708,281.021z"}),c.a.createElement("path",{d:"M153.275,490.805C186.932,454.913,256,372.341,256,298.667c0-71.771-56.229-128-128-128s-128,56.229-128,128     c0,95.26,115.75,205.76,120.677,210.417c2.052,1.948,4.688,2.917,7.323,2.917c7.771,0,15.156-0.271,22.156-0.802     c5.875-0.448,10.281-5.563,9.833-11.438C159.669,495.556,156.948,492.277,153.275,490.805z M128,486.292     c-25.198-25.708-106.667-114.5-106.667-187.625C21.333,238.854,68.188,192,128,192s106.667,46.854,106.667,106.667     C234.667,371.792,153.198,460.583,128,486.292z"})))),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null))},Ne=function(){return c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",height:24,x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve"},c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M435.143,129.356c-6.796-6.795-17.463-7.797-25.407-2.384c-29.926,20.398-180.03,122.969-196.162,139.1     c-23.394,23.395-23.394,61.459,0,84.854c11.697,11.696,27.063,17.545,42.427,17.545c15.364,0,30.729-5.849,42.427-17.545     c16.131-16.132,118.701-166.236,139.1-196.162C442.939,146.821,441.938,136.153,435.143,129.356z M270.142,322.641     c-7.797,7.799-20.486,7.799-28.283,0c-7.798-7.797-7.799-20.482-0.004-28.28c6.268-6.194,48.885-36.588,101.319-73.035     C306.728,273.76,276.334,316.375,270.142,322.641z"}),c.a.createElement("path",{d:"M92.231,401.523l-24.69,12.044C49.475,381.325,40,345.338,40,308.499c0-26.991,4.977-52.842,14.06-76.683l28.291,13.57     c2.79,1.338,5.735,1.972,8.636,1.972c7.453,0,14.608-4.185,18.047-11.355c4.776-9.959,0.576-21.906-9.384-26.683l-27.932-13.398     c34.717-56.62,94.784-96.095,164.283-102.505v30.081c0,11.046,8.954,20,20,20c11.046,0,20-8.954,20-20V93.402     c23.828,2.169,46.884,8.237,68.771,18.117c10.065,4.545,21.912,0.066,26.457-9.999c4.545-10.068,0.068-21.913-10-26.458     C328.063,60.091,292.659,52.499,256,52.499c-68.38,0-132.667,26.628-181.02,74.98C26.629,175.832,0,240.119,0,308.499     c0,50.53,14.998,99.674,43.373,142.115c3.822,5.715,10.141,8.886,16.639,8.886c2.954,0,5.946-0.655,8.757-2.026l41-20     c9.928-4.843,14.05-16.816,9.207-26.744C114.133,400.803,102.159,396.682,92.231,401.523z"}),c.a.createElement("path",{d:"M489.436,203.271c-4.544-10.067-16.387-14.547-26.458-10c-10.067,4.545-14.544,16.39-9.999,26.457     C465.601,247.686,472,277.553,472,308.499c0,36.894-9.506,72.939-27.625,105.218l-25.777-12.275     c-9.971-4.748-21.906-0.515-26.656,9.459c-4.749,9.972-0.514,21.907,9.459,26.656l42,20c2.763,1.315,5.692,1.944,8.588,1.944     c6.5,0,12.82-3.175,16.637-8.886C497.002,408.173,512,359.029,512,308.499C512,271.84,504.408,236.436,489.436,203.271z"})))),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null))},ke=q.a.Text;function Me(e,t){var a=e/60/(t/1e3),n=Math.round(60*(a-Math.floor(a)));return"".concat(Math.floor(a),":").concat(n)}function Se(e){var t=e.name,a=e.distance,n=e.elapsed_time,r=e.location_city,l=e.location_country;return c.a.createElement(ye.a,{className:"bottom-space-small"},c.a.createElement(xe.a,{title:t,style:{width:600},extra:c.a.createElement(ke,null,r?"".concat(r,", "):null,l)},c.a.createElement(be.a,{span:8},c.a.createElement(we.a,{title:"",value:a/1e3,precision:2,prefix:c.a.createElement(S.a,{component:Ce}),suffix:"Km"})),c.a.createElement(be.a,{span:8},c.a.createElement(we.a,{title:"",value:n/60,precision:0,prefix:c.a.createElement(S.a,{type:"clock-circle"}),suffix:"mins"})),c.a.createElement(be.a,{span:8},c.a.createElement(we.a,{title:"",value:Me(n,a),precision:2,prefix:c.a.createElement(S.a,{component:Ne}),suffix:"/km"}))))}var Te=q.a.Text,De=q.a.Title;function je(e){var t=e.data,a=_(),r=Object.keys(t).reverse(),l=Object(n.useState)(Object.keys(t).find((function(e){return t[e].effortLevel}))),s=Object(F.a)(l,2),o=s[0],i=s[1];console.log("selectedDay",o);var u=new Date(r[0]),m=new Date,f=Array.from(Array(12)).map((function(){var e=u.toLocaleString("default",{month:"short"});return u.setMonth(u.getMonth()+1),e}));m.getDate()>14&&f.push(f[0]),m.getDate()>21&&f.shift();var E=c.a.useMemo((function(){return Object.keys(t).reduce((function(e,a){return e+(t[a].activities||[]).length}),0)}),[t]);return c.a.createElement("div",{className:I()(me.a.container,"top-space-medium")},c.a.createElement("div",{className:I()(me.a.userInfoContainer)},c.a.createElement(re.a,{src:a.profile,className:I()(me.a.userAvatar)}),c.a.createElement("div",{className:I()(me.a.userBasicInfo)},c.a.createElement(Te,{strong:!0},"".concat(a.firstname," ").concat(a.lastname)),c.a.createElement(Te,{className:I()(me.a.userCity)},"".concat(a.city,", ").concat(a.country)))),c.a.createElement("div",null,c.a.createElement(Te,null,E," activities in the last year")),c.a.createElement("div",{className:I()(me.a.graphContainer)},c.a.createElement("div",{className:I()(me.a.graphSection)},c.a.createElement("div",{className:I()(me.a.dayRunner)},["Mon","Wed","Fri"].map((function(e){return c.a.createElement(ge,{day:e,key:e})}))),c.a.createElement("div",null,c.a.createElement("div",{className:I()(me.a.monthRunner),style:{padding:f.length>12?0:"0 16px"}},f.map((function(e,t){return c.a.createElement(ie,{month:e,key:e+t})}))),c.a.createElement("div",{className:I()(me.a.graph)},r.map((function(e){return c.a.createElement(ce,Object.assign({},t[e],{key:e,day:e,setSelectedDay:i}))}))))),c.a.createElement("div",{className:I()(me.a.row)},c.a.createElement(_e,null))),c.a.createElement("div",{className:I()(me.a.activitiesSummaryContainer)},c.a.createElement(De,{level:3},"Activities on ",o),(t[o].activities||[]).map((function(e){return c.a.createElement(Se,e)}))),c.a.createElement("div",null,c.a.createElement("pre",null,JSON.stringify(t[o],null,2))))}function Le(e){var t=_(),a=Object(n.useState)(null==t?1:2),r=Object(F.a)(a,2),l=r[0],s=r[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(W,{step:l}),1===l&&c.a.createElement(Y,null),2===l&&c.a.createElement(ee,{done:function(){return s(3)}}),3===l&&c.a.createElement(je,{data:d}))}var Ie=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(H,null),c.a.createElement(s.a,null,c.a.createElement(o.c,null,c.a.createElement(o.a,{path:"".concat("/strava-github-calendar","/auth-callback")},c.a.createElement(D,null)),c.a.createElement(o.a,{path:"".concat("/strava-github-calendar","/init-auth")},c.a.createElement(j,null)),c.a.createElement(o.a,{path:"".concat("/strava-github-calendar","/")},c.a.createElement(Le,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(656).a({dsn:"https://7ef33f9edba24b8aad31ad5801157c48@sentry.io/2201384"}),l.a.render(c.a.createElement(Ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},92:function(e,t,a){e.exports={header:"style_header__MlSQ_",logoImage:"style_logoImage__1Hwfc",aboutSection:"style_aboutSection__YQNF5",iconContainer:"style_iconContainer__uR_VW",icon:"style_icon__1XDv0"}}},[[331,1,2]]]);
//# sourceMappingURL=main.ca27985f.chunk.js.map